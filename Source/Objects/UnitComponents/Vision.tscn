[gd_scene load_steps=3 format=3 uid="uid://bnp8gglu6ecdl"]

[sub_resource type="GDScript" id="GDScript_gja0j"]
script/source = "extends Area2D

@export var unit: Unit = get_parent()
@onready var horizon_shape: CollisionShape2D = $HorizonShape
@onready var vision_height: float = unit.statblock.vision_height

var horizon_distance: float


func _update() -> void:
	horizon_distance = 3570 * sqrt(unit.height + vision_height)
	horizon_shape.shape.radius = horizon_distance
"

[sub_resource type="CircleShape2D" id="CircleShape2D_ndb7d"]

[node name="Vision" type="Area2D"]
collision_layer = 16
collision_mask = 16
script = SubResource("GDScript_gja0j")

[node name="HorizonShape" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_ndb7d")
